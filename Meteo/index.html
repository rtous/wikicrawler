<div class="mw-parser-output"><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:442px;"><a class="image" href="/pti/index.php/File:Meteoestructura.png"><img alt="" class="thumbimage" data-file-height="216" data-file-width="440" decoding="async" height="216" src="/pti/images/4/40/Meteoestructura.png" width="440"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/pti/index.php/File:Meteoestructura.png" title="Enlarge"></a></div>Estructura del proyecto.</div></div></div></div>
<div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introducci.C3.B3n"><span class="tocnumber">1</span> <span class="toctext">Introducción</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#.C2.BFQu.C3.A9_es_MeteoFib.3F"><span class="tocnumber">1.1</span> <span class="toctext">¿Qué es MeteoFib?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Infraestructura"><span class="tocnumber">2</span> <span class="toctext">Infraestructura</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Servicio_Web"><span class="tocnumber">3</span> <span class="toctext">Servicio Web</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Back-end"><span class="tocnumber">3.1</span> <span class="toctext">Back-end</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Tecnolog.C3.ADas_utilizadas"><span class="tocnumber">3.1.1</span> <span class="toctext">Tecnologías utilizadas</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="#Front-end"><span class="tocnumber">3.2</span> <span class="toctext">Front-end</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Tecnolog.C3.ADas_utilizadas_2"><span class="tocnumber">3.2.1</span> <span class="toctext">Tecnologías utilizadas</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Android"><span class="tocnumber">4</span> <span class="toctext">Android</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Estaci.C3.B3n_meteorol.C3.B3gica"><span class="tocnumber">5</span> <span class="toctext">Estación meteorológica</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Arduino"><span class="tocnumber">5.1</span> <span class="toctext">Arduino</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Componentes_y_precisi.C3.B3n"><span class="tocnumber">5.1.1</span> <span class="toctext">Componentes y precisión</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Conexi.C3.B3n_de_sensores_con_Arduino_UNO"><span class="tocnumber">5.1.2</span> <span class="toctext">Conexión de sensores con Arduino UNO</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Programaci.C3.B3n_Arduino"><span class="tocnumber">5.1.3</span> <span class="toctext">Programación Arduino</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Raspberry_Pi"><span class="tocnumber">5.2</span> <span class="toctext">Raspberry Pi</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Conexi.C3.B3n_con_Arduino_UNO"><span class="tocnumber">5.2.1</span> <span class="toctext">Conexión con Arduino UNO</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Docker_Container:_Servidor_MySQL"><span class="tocnumber">5.2.2</span> <span class="toctext">Docker Container: Servidor MySQL</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Docker_Container:_Servicio_Web_RESTful"><span class="tocnumber">5.2.3</span> <span class="toctext">Docker Container: Servicio Web RESTful</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Referencias"><span class="tocnumber">6</span> <span class="toctext">Referencias</span></a></li>
</ul>
</div>
<h1><span id="Introducción"></span><span class="mw-headline" id="Introducci.C3.B3n">Introducción</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=1" title="Edit section: Introducción">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=1" title="Edit section: Introducción">edit source</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span id="¿Qué_es_MeteoFib?"></span><span class="mw-headline" id=".C2.BFQu.C3.A9_es_MeteoFib.3F">¿Qué es MeteoFib?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=2" title="Edit section: ¿Qué es MeteoFib?">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=2" title="Edit section: ¿Qué es MeteoFib?">edit source</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Nuestro proyecto consiste en una estación meteorológica que provee a los usuarios de datos de interés sobre las condiciones climatológicas del día actual y un histórico de los días recientes. El usuario puede consultar dicha información mediante una aplicación de Android o bien mediante una página web habilitada para tal propósito.
</p><p><br/>
</p>
<h1><span class="mw-headline" id="Infraestructura">Infraestructura</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=3" title="Edit section: Infraestructura">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=3" title="Edit section: Infraestructura">edit source</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Nuestro infraestructura consiste de distintos componentes. En primer lugar tenemos un Arduino conectado a unos sensores de temperatura, humedad y presión. Este a su vez, se conecta con una Raspberry Pi para enviarle los datos recogidos por los sensores.
</p><p>La Raspberry nos servirá para dos fines: almacenar estos datos meteorológicos en una base de datos SQL y para crear un servicio web que será el encargado de recibir las peticiones GET de la página web y la aplicación Android y responder a estas peticiones con los datos pedidos en formato JSon. Tanto la Base de datos como el servicio web se encuentran en dos contenedores independientes que se gestionan mediante Docker.
</p><p>Para poder visualizar estos datos, al usuario se le ofrecen dos posibilidades, acceder a ellos mediante una página web y una aplicación Android.
</p><p><br/>
</p>
<h1><span class="mw-headline" id="Servicio_Web">Servicio Web</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=4" title="Edit section: Servicio Web">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=4" title="Edit section: Servicio Web">edit source</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Back-end">Back-end</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=5" title="Edit section: Back-end">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=5" title="Edit section: Back-end">edit source</a><span class="mw-editsection-bracket">]</span></span></h2><p>
Parte importante de este proyecto era tener un soporte web. Para ello se ha tenido en cuenta en hacer una aplicación web que pudiera dar a los usuarios de nuestro servicio una interfaz accesible, fácil y sencilla de usar para consultar los datos meteorológicos capturados por nuestros equipos. </p><div class="thumb tright"><div class="thumbinner" style="width:202px;"><a class="image" href="/pti/index.php/File:Opennebula.png"><img alt="" class="thumbimage" data-file-height="794" data-file-width="744" decoding="async" height="213" src="/pti/images/thumb/e/e5/Opennebula.png/200px-Opennebula.png" srcset="/pti/images/thumb/e/e5/Opennebula.png/300px-Opennebula.png 1.5x, /pti/images/thumb/e/e5/Opennebula.png/400px-Opennebula.png 2x" width="200"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/pti/index.php/File:Opennebula.png" title="Enlarge"></a></div>OpenNebula</div></div></div>
<p>Gracias a los recursos y apoyos ofrecidos desde la facultad de informática (FIB), hemos tenido acceso y control de un servidor en la nube (OpenNebula). Para llevar a cabo nuestra tarea con el servidor web, hemos adoptado decisiones necesarias y apropiadas según nuestro criterio hacia las tecnologías a utilizar, a las configuraciones a realizar y al desarrollo para que el servidor consiga el desempeño esperado. 
</p><p>El servidor  en la nube es un linux, para la implementación del servicio se ha utilizado python como lenguaje de programación entorno al backend. Python da una flexibilidad para la programación de web services, la cual hemos aprovechado utilizando para desarrollar nuestra API. En la parte de configuración tenemos un servidor web(nginx), un microframework (flask) y un WSI(gunicorn) para la comunicación entre el server y sus peticiones contra el microframework. 
</p><p>A la hora de definir una API, disponemos de diferentes tipos de arquitectura donde elegir, sin embargo en los últimos años un tipo de arquitectura está creciendo, coincidiendo con el auge de los sistemas cloud. Estamos hablando de la arquitectura REST la cual no es un estándar ni un protocolo, sino una serie de principios de arquitectura. Nuestra elección de esta configuración ha sido principalmente para un desarrollo dinámico y con más facilidades. Unas de las ventajas de REST es la comunicación y utilización de los métodos dados por HTTP. Así no es necesario tener una compleja estructura para que los extremos de los servicios se comuniquen. Facilitando el desarrollo en cada punto final del servicio como es la web y la aplicación de Android.
</p>
<h3><span id="Tecnologías_utilizadas"></span><span class="mw-headline" id="Tecnolog.C3.ADas_utilizadas">Tecnologías utilizadas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=6" title="Edit section: Tecnologías utilizadas">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=6" title="Edit section: Tecnologías utilizadas">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>OpenNebula: Es la plataforma ofrecido por la FIB para el manejo de un servidor. Nosotros la utilizamos como servidor web, donde albergar nuestra aplicación web.</li>
<li>Ubuntu: Para el sistema operativo se nos ofrece un template, el cual tiene una serie de configuraciones predeterminadas.</li>
<li>Nginx: Servidor web/proxy inverso ligero de alto rendimiento</li>
<li>Gunicorn: Servidor HTTP de Python WSGI para UNIX.</li>
<li>Python: Lenguaje de programción para la implemtación de Flask.</li>
<li>Pip: Instalador de dependencias y módulos de python.</li>
<li>Virtualenv: Herramienta para generar entorno virtual que aisla el directorio de trabajo del resto de la máquina.</li>
<li>Flask: micro framework para las definiciones de rutas y tratamientos de peticiones.</li>
<li>Supervisor: Controlador para el fácil deployment de los servidores.</li></ul>
<h2><span class="mw-headline" id="Front-end">Front-end</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=7" title="Edit section: Front-end">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=7" title="Edit section: Front-end">edit source</a><span class="mw-editsection-bracket">]</span></span></h2><p>
Lo primero que había que decidir era el diseño que iba a tener la web de nuestro proyecto y a su vez, decidir cuáles serían los diferentes apartados de la misma. Para ello, en un papel realice un pequeño boceto de la idea que tenía para el diseño y con la colaboración de los demás miembros del grupo decidimos los apartados que tendría nuestra web. </p><div class="thumb tright"><div class="thumbinner" style="width:402px;"><a class="image" href="/pti/index.php/File:Meteofibweb.png"><img alt="" class="thumbimage" data-file-height="990" data-file-width="1904" decoding="async" height="208" src="/pti/images/thumb/3/32/Meteofibweb.png/400px-Meteofibweb.png" srcset="/pti/images/thumb/3/32/Meteofibweb.png/600px-Meteofibweb.png 1.5x, /pti/images/thumb/3/32/Meteofibweb.png/800px-Meteofibweb.png 2x" width="400"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/pti/index.php/File:Meteofibweb.png" title="Enlarge"></a></div>Página principal del servicio web.</div></div></div>
<p>Inicialmente estos apartados eran: Home, Medición, Estadísticas, Contacto y Sobre Nosotros.
</p><p>Una vez con el diseño en mente, había que plasmarlo en una pantalla por lo que era necesario aprender sobre las diferentes tecnologías implicadas como son HTML y CSS.
</p><p>Para los estilo utilizamos Bootstrap, un potente framework que ayudaría al diseño de nuestra web, ya que hasta el momento todos los estilos de la misma los iba haciendo directamente con CSS lo que retrasaba un poco los avances ya que incluso para las cosas más sencillas hacían falta unas cuantas líneas de código con CSS.
</p><p>Gracias a esto, la web obtuvo un diseño más profesional y agradable a la vista. Este diseño lo podemos apreciar en el diseño final de la misma:
</p>
<h3><span id="Tecnologías_utilizadas_2"></span><span class="mw-headline" id="Tecnolog.C3.ADas_utilizadas_2">Tecnologías utilizadas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=8" title="Edit section: Tecnologías utilizadas">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=8" title="Edit section: Tecnologías utilizadas">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>HTML: Lenguaje orientado a la especificación de  la estructura de los diferentes apartados de la página web.</li>
<li>CSS: Lenguaje utilizado para describir el diseño de los documentos HTML.</li>
<li>Bootstrap: Framework para facilitar el desarrollo de los estilos CSS.</li>
<li>JavaScript: Lenguaje de programación utilizado para mejorar los documentos HTML, darles mayor interacción, entre otros.</li>
<li>Shell Script: Fichero que contiene una serie de comandos a ejecutar.</li>
<li>Python: Lenguaje de programación que favorece la legibilidad del código.</li>
<li>Flask: Web Framework ligero basado en Python.</li>
<li>Jinja: Template Engine para Python que permite entre otras cosas incluir objetos HTML o no dependiendo de diferentes flags.</li>
<li>MongoDB: Base de datos no relacional.</li></ul>
<h1><span class="mw-headline" id="Android">Android</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=9" title="Edit section: Android">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=9" title="Edit section: Android">edit source</a><span class="mw-editsection-bracket">]</span></span></h1>
<div class="thumb tright"><div class="thumbinner" style="width:152px;"><a class="image" href="/pti/index.php/File:Meteowidget.png"><img alt="" class="thumbimage" data-file-height="1920" data-file-width="1080" decoding="async" height="267" src="/pti/images/thumb/1/19/Meteowidget.png/150px-Meteowidget.png" srcset="/pti/images/thumb/1/19/Meteowidget.png/225px-Meteowidget.png 1.5x, /pti/images/thumb/1/19/Meteowidget.png/300px-Meteowidget.png 2x" width="150"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/pti/index.php/File:Meteowidget.png" title="Enlarge"></a></div>Widget de Android.</div></div></div>
<p>Para el desarrollo de nuestra aplicación para Android lo primero que decidí hacer fue fijarme en otras alternativas existentes en el mercado para poder tener una serie de prestaciones comparable pero siempre teniendo en cuenta lo que nuestro sistema puede hacer. Me fijé en dos aplicaciones: AccuWeather y Yahoo Tiempo. De estas dos aplicaciones cogí algunas ideas, entre ellas el disponer de imágenes de fondo de Barcelona y el poder cambiar entre unidades.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:152px;"><a class="image" href="/pti/index.php/File:Meteoandroid.png"><img alt="" class="thumbimage" data-file-height="1920" data-file-width="1080" decoding="async" height="267" src="/pti/images/thumb/c/c6/Meteoandroid.png/150px-Meteoandroid.png" srcset="/pti/images/thumb/c/c6/Meteoandroid.png/225px-Meteoandroid.png 1.5x, /pti/images/thumb/c/c6/Meteoandroid.png/300px-Meteoandroid.png 2x" width="150"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/pti/index.php/File:Meteoandroid.png" title="Enlarge"></a></div>App de android.</div></div></div><p>Para desarrollar la aplicación de Android he trabajado con distintas tecnologías, que son las propias del entorno Android. Son las siguientes:
</p><ul><li>Java: Lenguaje orientado a objetos usado para la ejecución del código de la aplicación</li>
<li>XML: Lenguaje de marcas usado para definir constantes y layouts en el proyecto</li>
<li>SQL: Lenguaje para la gestión de la Base de Datos de la aplicación mediante SQLite</li>
<li>JSON: Formato usado para obtener los datos de la Raspberry Pi que luego son parseados para ser legibles por nuestra aplicación.</li>
<li>Gradle: Herramienta para compilar, testear y empaquetar la aplicación.</li></ul>
<p>En primer lugar tenemos la Activity principal en la que podemos obtener los datos del día actual y los 6 días anteriores. Del primer día podemos ver de forma destacada la temperatura máxima y mínima y el clima. De los otros 6 días podemos ver la temperatura máxima y mínima. Todo esto está integrado dentro de una ListView.
</p><p>Luego tenemos la Activity de detalle a la que se puede acceder mediante un intent al pulsar un elemento de la lista de la Activity principal. En esta vista, además de los datos que podemos visualizar en la Activity anterior podemos visualizar también la presión y humedad junto con una imagen de fondo para que quede todo más vistoso. Podríamos haber puesto lo datos de presión y humedad en la activity anterior pero el conjunto hubiera quedado demasiado cargado, además de que no mucha gente tiene interés en saber acerca de estos últimos datos. En esta activity hemos implementado un intent implícito para compartir los datos. Podemos elegir la aplicación a la que queramos compartir los datos - Twitter, Gmail, Keep… - y enviarlos.
</p><p><br/>
</p>
<h1><span id="Estación_meteorológica"></span><span class="mw-headline" id="Estaci.C3.B3n_meteorol.C3.B3gica">Estación meteorológica</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=10" title="Edit section: Estación meteorológica">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=10" title="Edit section: Estación meteorológica">edit source</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Arduino">Arduino</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=11" title="Edit section: Arduino">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=11" title="Edit section: Arduino">edit source</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Para la medición de parámetros como temperatura, humedad relativa y presión atmosférica hemos optado por utilizar la placa Arduino UNO por las prestaciones que nos ofrecía para cumplir los objetivos de nuestro proyecto. En dicha placa conectamos los sensores necesarios para la lectura de los parámetros mencionados.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a class="image" href="/pti/index.php/File:Meteoarduino.jpg"><img alt="" class="thumbimage" data-file-height="1999" data-file-width="1500" decoding="async" height="400" src="/pti/images/thumb/6/67/Meteoarduino.jpg/300px-Meteoarduino.jpg" srcset="/pti/images/thumb/6/67/Meteoarduino.jpg/450px-Meteoarduino.jpg 1.5x, /pti/images/thumb/6/67/Meteoarduino.jpg/600px-Meteoarduino.jpg 2x" width="300"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/pti/index.php/File:Meteoarduino.jpg" title="Enlarge"></a></div>Arduino con los sensores DHT11 y BMP 180.</div></div></div>
<h3><span id="Componentes_y_precisión"></span><span class="mw-headline" id="Componentes_y_precisi.C3.B3n">Componentes y precisión</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=12" title="Edit section: Componentes y precisión">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=12" title="Edit section: Componentes y precisión">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Para medir la temperatura, humedad y presión atmosférica utilizamos los sensores DHT11 y BMP 180. El primero mide la temperatura y humedad relativa, mientras que el segundo mide la presión atmosférica, la temperatura y la altura relativa, aunque este último parámetro no es útil.
</p><p>El sensor DHT11 mide la humedad y la temperatura con un ±5% y ±2ºC de error, respectivamente, mientras que el sensor BMP180 mide la presión atmosférica y la temperatura con un ±0.12hPa y ±2ºC de error, respectivamente.
</p>
<h3><span id="Conexión_de_sensores_con_Arduino_UNO"></span><span class="mw-headline" id="Conexi.C3.B3n_de_sensores_con_Arduino_UNO">Conexión de sensores con Arduino UNO</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=13" title="Edit section: Conexión de sensores con Arduino UNO">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=13" title="Edit section: Conexión de sensores con Arduino UNO">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Para conectar dichos sensores hacemos uso de una protoboard, la cual conectaremos al arduino, siguiendo con las recomendaciones de los fabricantes de estos sensores.
</p><p>Por recomendación del fabricante, se conecta al pin de 3.3V del arduino. El pin de datos se conecta al pin 2 (Digital) haciendo un pull-up entre esta línea y la de voltaje mediante una resistencia de 10KOhm. Finalmente conectamos el pin ground al pin GND del arduino.
</p><p>Para el sensor BMP180 conectamos el pin de voltaje al de 3.3V de Arduino, mientras que los de datos, SDA y SCC, a los pins A4 y A5, respectivamente. Por último conectamos el sensor al pin GND.
</p>
<h3><span id="Programación_Arduino"></span><span class="mw-headline" id="Programaci.C3.B3n_Arduino">Programación Arduino</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=14" title="Edit section: Programación Arduino">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=14" title="Edit section: Programación Arduino">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>En nuestra placa Arduino UNO cargaremos un programa en C++ para hacer las lecturas de los sensores. Este programa tiene una estructura simple compuesta de, en esencia, tres funciones:
</p><p>Void setup: en esta función definiremos la velocidad del bus (bps) y pondremos en marcha los sensores DHT11 y BMP180 con las dht.begin() y SensorStart(), respectivamente.    
</p><p>Void loop: Primero comprobamos si hay algún dato en el bus, si es así comprobaremos que dicha dato sea una a. Si esta condición valida a cierto haremos las lecturas de los sensores y los enviaremos mediante la función envioDatos(). Es decir, lo que hacemos en esta función es una comunicación entre el otro extremo y nuestro Arduino: cuando llegue un byte cuyo valor corresponda a una a enviaremos los datos.
</p><p><br/>
Void envioDatos(): procede a leer los datos de ambos sensores con dht.readHumidity, dht.readTemperatura y ReadSensor (este último realiza la lectura sobre el sensor BMP180). Por último, con los datos recibidos de estas funciones se introduce en una string que enviaremos por nuestro bus de comunicación.
</p>
<h2><span class="mw-headline" id="Raspberry_Pi">Raspberry Pi</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=15" title="Edit section: Raspberry Pi">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=15" title="Edit section: Raspberry Pi">edit source</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Nuestra Raspberry Pi es un componente esencial en este proyecto porque es la plataforma que se comunica con nuestro Arduino para recibir los datos, almacenarlos en una base de datos y un servicio web que proveerá dichos datos al servidor web y la aplicación Android. En esta sección explicaremos estos tres puntos: conexión con Arduino, base de datos y servicio web.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a class="image" href="/pti/index.php/File:Meteoraspberry.png"><img alt="" class="thumbimage" data-file-height="1214" data-file-width="1560" decoding="async" height="156" src="/pti/images/thumb/b/b9/Meteoraspberry.png/200px-Meteoraspberry.png" srcset="/pti/images/thumb/b/b9/Meteoraspberry.png/300px-Meteoraspberry.png 1.5x, /pti/images/thumb/b/b9/Meteoraspberry.png/400px-Meteoraspberry.png 2x" width="200"/></a> <div class="thumbcaption"><div class="magnify"><a class="internal" href="/pti/index.php/File:Meteoraspberry.png" title="Enlarge"></a></div>raspberry utilizada.</div></div></div>
<h3><span id="Conexión_con_Arduino_UNO"></span><span class="mw-headline" id="Conexi.C3.B3n_con_Arduino_UNO">Conexión con Arduino UNO</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=16" title="Edit section: Conexión con Arduino UNO">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=16" title="Edit section: Conexión con Arduino UNO">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Como ya explicamos en la sección Programación de Arduino, este dispositivo espera a un signal, un byte cuyo valor es a, para hacer la lectura de los sensores y devolverlo por el bus de datos. Para ello tenemos un script en python (script_escritura.py) que envía dicho byte haciendo uso de la librería Serial.
</p><p>Una vez obtenidos los datos de nuestros dos sensores tenemos que introducirlos en nuestra base de datos. Para hacer un insert utilizamos la librería MySQLdb. A continuación tenemos una porción de nuestro código donde se realiza la conexión con la BD y la ejecución de una query.
</p>
<h3><span class="mw-headline" id="Docker_Container:_Servidor_MySQL">Docker Container: Servidor MySQL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=17" title="Edit section: Docker Container: Servidor MySQL">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=17" title="Edit section: Docker Container: Servidor MySQL">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Un aspecto importante de nuestra BD es que corre sobre un contenedor Docker, cuya tecnología facilita la exportación a otros sistemas, o en este caso a otras Raspberry.
</p><p>Para nuestra base de datos utilizamos el sistema de gestión MySQL. Los datos obtenidos en nuestro Arduino se enviarán, como hemos explicado, por script_escritura.py a nuestra base de datos que tiene por nombre meteofib, concretamente en la tabla meteofib_table. Además de nuestras mediciones, también guardamos la fecha, la hora y la ciudad donde se encuentra la estación meteorológica, así como las coordenadas.
</p>
<h3><span class="mw-headline" id="Docker_Container:_Servicio_Web_RESTful">Docker Container: Servicio Web RESTful</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=18" title="Edit section: Docker Container: Servicio Web RESTful">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=18" title="Edit section: Docker Container: Servicio Web RESTful">edit source</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>El servicio web es un WS en REST hecho con el lenguaje de programación Python, concretamente utilizamos el microframework Flask.
</p><p>Los servicios web en REST aceptan distintos tipos de formato, pero por su simplicidad decidimos utilizar JSON. 
Este servicio web recibe las peticiones de nuestro servidor web así como de la aplicación Android. Dependiendo de la petición puede devolver la media de los valores solicitados de un día determinado, la temperatura mínima y máxima o incluso los valores obtenidos para cada hora. Aquí un listado de los endpoints:
</p>
<ul><li>tiempoHoy: devuelve para el día actual la temperatura, la humedad y la presión atmosférica de cada hora.</li></ul>
<ul><li>TemperaturaHoy: a diferencia de tiempoHoy, este endpoint sólo devuelve la temperatura para cada hora del día actual.</li></ul>
<ul><li>HumedadHoy: retorna la humedad para cada hora del día actual.</li></ul>
<ul><li>p_atmosHoy: devuelve la presión atmosférica para cada hora del día actual.</li></ul>
<ul><li>coordenadas: retorna las coordenadas asociadas a la estación meteorológica.</li></ul>
<ul><li>MediaDia (fecha): obtenemos una media de la temperatura, humedad y presión atmosférica de entre todas las horas al pasarle una fecha (YYYY-MM-DD) como parámetro.</li></ul>
<ul><li>minmaxDia: retorna la temperatura mínima y máxima de la temperatura al pasarle una fecha como parámetro.</li></ul>
<h1><span class="mw-headline" id="Referencias">Referencias</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a class="mw-editsection-visualeditor" href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;veaction=edit&amp;section=19" title="Edit section: Referencias">edit</a><span class="mw-editsection-divider"> | </span><a href="/pti/index.php?title=Categor%C3%ADa:Meteo&amp;action=edit&amp;section=19" title="Edit section: Referencias">edit source</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>Amatellanes.wordpress.com. (2016). Android &gt;&gt; Integrando un RESTful Web Service en Android. [online] Available at: <a class="external free" href="https://amatellanes.wordpress.com/2014/01/02/android-integrando-un-restful-web-service-en-android/" rel="nofollow">https://amatellanes.wordpress.com/2014/01/02/android-integrando-un-restful-web-service-en-android/</a> [Accessed 19 Nov. 2016].</li>
<li>Cloudoki. (2016). Getting started with RESTful APIs using the Flask microframework for Python. [online] Available at: <a class="external free" href="http://blog.cloudoki.com/getting-started-with-restful-apis-using-the-flask-microframework-for-python/" rel="nofollow">http://blog.cloudoki.com/getting-started-with-restful-apis-using-the-flask-microframework-for-python/</a> [Accessed 7 Oct. 2016].</li>
<li>Docs.oracle.com. (2016). Creating a RESTful Root Resource Class - The Java EE 6 Tutorial. [online] Available at: <a class="external free" href="http://docs.oracle.com/javaee/6/tutorial/doc/gilik.html" rel="nofollow">http://docs.oracle.com/javaee/6/tutorial/doc/gilik.html</a> [Accessed 30 Sep. 2016].</li>
<li>Docs.spring.io. (2016). 18.2 Creating RESTful services. [online] Available at: <a class="external free" href="http://docs.spring.io/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18s02.html" rel="nofollow">http://docs.spring.io/spring/docs/3.0.0.M3/spring-framework-reference/html/ch18s02.html</a> [Accessed 10 Nov. 2016].</li>
<li>Dr. Dobb's. (2016). RESTful Web Services: A Tutorial. [online] Available at: <a class="external free" href="http://www.drdobbs.com/web-development/restful-web-services-a-tutorial/240169069" rel="nofollow">http://www.drdobbs.com/web-development/restful-web-services-a-tutorial/240169069</a> [Accessed 8 Oct. 2016].</li>
<li>Flask.pocoo.org. (2016). How to serve HTTPS *directly* from Flask (no nginx, no apache, no gunicorn) | Flask (A Python Microframework). [online] Available at: <a class="external free" href="http://flask.pocoo.org/snippets/111/" rel="nofollow">http://flask.pocoo.org/snippets/111/</a> [Accessed 3 Nov. 2016].</li>
<li>Flask.pocoo.org. (2016). Installation — Flask Documentation (0.10). [online] Available at: <a class="external free" href="http://flask.pocoo.org/docs/0.10/installation/" rel="nofollow">http://flask.pocoo.org/docs/0.10/installation/</a> [Accessed 21 Oct. 2016].</li>
<li>GitHub. (2016). kennethreitz/flask-sslify. [online] Available at: <a class="external free" href="https://github.com/kennethreitz/flask-sslify" rel="nofollow">https://github.com/kennethreitz/flask-sslify</a> [Accessed 7 Oct. 2016].</li>
<li>GitHub. (2016). spring-guides/gs-rest-service. [online] Available at: <a class="external free" href="https://github.com/spring-guides/gs-rest-service" rel="nofollow">https://github.com/spring-guides/gs-rest-service</a> [Accessed 9 Oct. 2016].</li>
<li>Grinberg, M. (2016). miguelgrinberg.com. [online] Blog.miguelgrinberg.com. Available at: <a class="external free" href="https://blog.miguelgrinberg.com" rel="nofollow">https://blog.miguelgrinberg.com</a> [Accessed 7 Oct. 2016].</li>
<li>Molinero, S. (2016). Cómo manejar Git como un experto desde Android Studio. [online] Genbetadev.com. Available at: <a class="external free" href="https://www.genbetadev.com/sistemas-de-control-de-versiones/como-manejar-git-como-un-experto-usando-android-studio" rel="nofollow">https://www.genbetadev.com/sistemas-de-control-de-versiones/como-manejar-git-como-un-experto-usando-android-studio</a> [Accessed 4 Dec. 2016].</li>
<li>Nervia Digital, S. (2016). nginx españa : la evolución del servidor web de alto rendimiento. [online] Nginx.es. Available at: <a class="external free" href="http://nginx.es/" rel="nofollow">http://nginx.es/</a> [Accessed 10 Dec. 2016].</li>
<li>Pip.pypa.io. (2016). Installation — pip 9.1.0.dev0 documentation. [online] Available at: <a class="external free" href="https://pip.pypa.io/en/latest/installing/" rel="nofollow">https://pip.pypa.io/en/latest/installing/</a> [Accessed 7 Oct. 2016].</li>
<li>Python.org. (2016). Download Python. [online] Available at: <a class="external free" href="https://www.python.org/downloads/" rel="nofollow">https://www.python.org/downloads/</a> [Accessed 7 Oct. 2016].</li>
<li>Spring.io. (2016). Building a RESTful Web Service. [online] Available at: <a class="external free" href="https://spring.io/guides/gs/rest-service/" rel="nofollow">https://spring.io/guides/gs/rest-service/</a> [Accessed 9 Dec. 2016].</li>
<li>Spring.io. (2016). Understanding : REST. [online] Available at: <a class="external free" href="https://spring.io/understanding/REST" rel="nofollow">https://spring.io/understanding/REST</a> [Accessed 15 Oct. 2016].</li>
<li>Ubuntufacil.com. (2016). Instalar servidor web Tomcat en Ubuntu | Ubuntu Fácil. [online] Available at: <a class="external free" href="http://www.ubuntufacil.com/2013/12/instalar-servidor-web-tomcat-en-ubuntu/" rel="nofollow">http://www.ubuntufacil.com/2013/12/instalar-servidor-web-tomcat-en-ubuntu/</a> [Accessed 3 Sep. 2016].</li>
<li>Xfront.com. (2016). Citar un sitio web - Cite This For Me. [online] Available at: <a class="external free" href="http://www.xfront.com/REST-Web-Services.html" rel="nofollow">http://www.xfront.com/REST-Web-Services.html</a> [Accessed 23 Nov. 2016].</li>
<li>DHT11. Librerías e información [online] Available at: <a class="external free" href="https://www.adafruit.com/product/386" rel="nofollow">https://www.adafruit.com/product/386</a></li>
<li>BMP180 - Información             [online] Available at: <a class="external free" href="https://cdn-shop.adafruit.com/datasheets/BST-BMP180-DS000-09.pdf" rel="nofollow">https://cdn-shop.adafruit.com/datasheets/BST-BMP180-DS000-09.pdf</a></li>
<li>Docker - Servidor MySQL         [online] Available at: <a class="external free" href="https://hub.docker.com/r/hypriot/rpi-mysql/" rel="nofollow">https://hub.docker.com/r/hypriot/rpi-mysql/</a></li>
<li>MySQL - Documentation          [online] Available at: <a class="external free" href="https://www.mysql.com/" rel="nofollow">https://www.mysql.com/</a></li>
<li>Docker - Documentation         [online] Available at: <a class="external free" href="https://docs.docker.com/" rel="nofollow">https://docs.docker.com/</a></li></ul>
<!-- 
NewPP limit report
Cached time: 20250710083830
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.025 seconds
Real time usage: 0.030 seconds
Preprocessor visited node count: 63/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
<!-- Saved in parser cache with key pti21:pcache:idhash:263-0!canonical and timestamp 20250710083830 and revision id 296
 -->
</div>